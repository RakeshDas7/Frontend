<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body style="font-family: cursive;">
    <h1>Async Function</h1>
    <p>- An async function that always return promise.</p>

    <script>
        function A() {
        }

        async function B() {

        }

        async function C() {
            return new Promise(() => {
            })
        }

        async function D() {
            return "hello"
        }

        D()
            .then((res) => {
                console.log("promise was resolved", res)
            })
            .catch((err) => {
                console.log("Promise wqas rejected", err)
            })
    </script>

    <br><br>
    <h1>Await Keyword</h1>
    <p>- Await keyword is used to pause the execution of the code until the promise is settled (resolved or rejected).
    </p>

    <script>
        function wait() {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    console.log("Set Timeout completed")
                    resolve()
                }, 2000)
            })
        }

        async function f1() {
            console.log("start")
            await wait()
            console.log("end")
        }

        f1()

        //================================================================================

        function doStep(step, delay) {
            return new Promise((resolve, reject) => {
                const number = Math.floor
                    (Math.random() * 10 + 1)
                if (number > 4) {
                    reject("Insuficient ingredient")
                }
                setTimeout(() => {
                    console.log(step)
                    resolve(`${step} done`)
                }, delay)
            })
        }

        async function makeTea() {
            try {
                await doStep("Boil water", 1000)
                await doStep("Add tea leaves", 1000)
                await doStep("Pour into cups", 1000)
                await doStep("Tea is ready", 1000)
            } catch (error) {
                console.log("Error", error)
            }
        }
    </script>
</body>

</html>